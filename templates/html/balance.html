<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static', filename='css/balance.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/nav.css')}}">
  <link
      href="https://fonts.googleapis.com/css2?family=Montserrat&family=Montserrat+Alternates&display=swap"
      rel="stylesheet"
    />
  </head>
<body>
  <nav class="nav">
    <img src="{{url_for('static', filename='img/latte.png')}}" alt="">
    <a href="registroProducto.html" class="nav-link active">Registrar Producto</a>
    <a href="registroCajero.html" class="nav-link">Registar cajero</a>
    <a href="productos.html" class="nav-link">Productos</a>
    <a href="usuarios.html" class="nav-link">Cajeros</a>
    <a href="balance.html" class="nav-link">Balance</a>
    <a href="../index.html" class="nav-link">Cerrar sesión</a>
  </nav>
  <div class="contenedorTabla">    
    <table class="table">      
        <thead>
          <caption>Balance del día
            <input type="date" id="fechaBalance" name="fechaBalance" value={{fecha_balance}}>
          </caption>
          <tr>
            <th scope="col">ID Venta</th>
            <th scope="col">Total</th>
            <th scope="col">Detalles</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="ventaID1"></td>
            <td id="ventaTotal1"></td>     
            <td>                
                <button class="boton" data-toggle="modal" id="1" data-target="#modal-detalles-venta" onClick="mostrarDetalles(415)">Detalles</button>
            </td>
          </tr>
          <tr>
            <td id="ventaID2"></td>
            <td id="ventaTotal2"></td>   
            <td>                
                <button class="boton" data-toggle="modal" id="2" data-target="#modal-detalles-venta" onClick="mostrarDetalles(416)">Detalles</button>
            </td>
          </tr>
          <tr>
            <td id="ventaID3"></td>
            <td id="ventaTotal3"></td>   
            <td>                
                <button class="boton" data-toggle="modal" id="3" data-target="#modal-detalles-venta" onClick="mostrarDetalles(417)">Detalles</button>
            </td>
          </tr>
          <tr>
            <td></td>
            <td><b>TOTAL: $34.500</b></td>
            <td></td>
          </tr>          
        </tbody>
      </table>
  </div>


   <!-- Modal -->
   <div class="modal fade " id="modal-detalles-venta" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" style="width: 95%; max-width: none;">
      <div class="modal-content" style="height: 90%;">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Detalles de la venta</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="">
            <table class="table">
              <thead>
                <caption>Venta # 415</caption>
                <tr>
                  <th scope="col">ID Producto</th>
                  <th scope="col">Nombre</th>
                  <th scope="col">Precio Unitario</th>
                  <th scope="col">Cantidad</th>
                  <th scope="col">Subtotal</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>94</td>
                  <td>Café</td>
                  <td>$2.500</td>
                  <td>2</td>
                  <td>$5.000</td>                 
                </tr>
                <tr>
                  <td>80</td>
                  <td>Pandebono</td>
                  <td>$5.200</td>
                  <td>2</td>
                  <td>$10.400</td>                 
                </tr>         
              </tbody>
            </table>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Regresar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Final de ventana modal -->



    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var ventasDia;

      window.onload = function() {
        let hoy = new Date();
        let fechaString = formatearFecha(hoy);
        document.getElementById('fechaBalance').value = fechaString;
        ventasDia = [
          {
            "id" : "415",
            "total" : "$25.000",
            "productosVendidos" : [
              {
                "id" : "45",
                "nombre" : "Café",
                "precioUnitario" : "$2.500",
                "cantidad" : "2"
              },
              {
                "id" : "23",
                "nombre" : "Torta Chocolate",
                "precioUnitario" : "$5.000",
                "cantidad" : "4"
              }
            ]
          },
          {
            "id" : "416",
            "total" : "$7.250",
            "productosVendidos" : [
              {
                "id" : "10",
                "nombre" : "Malteada Chocolate",
                "precioUnitario" : "$5.500",
                "cantidad" : "1"
              },
              {
                "id" : "10",
                "nombre" : "Tinto Mediano",
                "precioUnitario" : "$2.000",
                "cantidad" : "1"
              }
            ]
          },
          {
            "id" : "417",
            "total" : "$2.250",
            "productosVendidos" : [
              {
                "id" : "11",
                "nombre" : "Tinto Grande",
                "precioUnitario" : "$2.250",
                "cantidad" : "1"
              }
            ]
          }
        ];

        document.getElementById('ventaID1').innerHTML = ventasDia.find(element => element.id == 415).id;
        document.getElementById('ventaTotal1').innerHTML = ventasDia.find(element => element.id == 415).total;

        document.getElementById('ventaID2').innerHTML = ventasDia.find(element => element.id == 416).id;
        document.getElementById('ventaTotal2').innerHTML = ventasDia.find(element => element.id == 416).total;

        document.getElementById('ventaID3').innerHTML = ventasDia.find(element => element.id == 417).id;
        document.getElementById('ventaTotal3').innerHTML = ventasDia.find(element => element.id == 417).total;

      };

      let mostrarDetalles = function(ventaID) {
        let ventaSeleccionada = ventasDia.find(element => element.id == ventaID);
        document.getElementById('total').innerHTML = ventaSeleccionada.total;
      };

      let formatearFecha = function(date) {
        var year = date.getFullYear().toString();
        var month = (date.getMonth() + 1).toString();
        var day = date.getDate().toString();
        if(month.length == 1)
          month = "0" + month;
        if(day.length == 1)
          day = "0" + day;
        return year + "-" + month + "-" + day;
      };
    </script>

</body>
</html>